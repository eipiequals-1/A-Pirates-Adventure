package com.company;
import com.company.Parts.*;

import java.util.Scanner;

public class Story {
    // Create a reference variable to all important stages (objects) of the game
    private Scanner sc;
    public String name;
    public Player player;
    public String ship;
    public String firstMate;
    public String[] crew;

    public Part1 stage1;
    public Intro intro;
    public England england;
    public Straits strait;

    public Story() {
        // Initialize the references and link them to objects
        this.setCrew();
        this.sc = new Scanner(System.in); // User input object
        this.player = new Player(this.name); // Player object
        this.intro = new Intro();
        this.stage1 = new Part1();
        this.england = new England();
        this.strait = new Straits();
    }

    public void sequence() {
        // main loop for the story
        // handles important events and stages in the story
        boolean lose = false;
        String currState = "continue"; // Default value
        while (!lose) {
            this.setName();
            this.setShip();
            this.intro.run(this);
            currState = this.stage1.run(this); // Stores new state in currState
            if (currState.equals("continue") || currState.equals("win")) {
                this.strait.run(this); // Story continues in the Straits
            } else {
                currState = this.england.run(this);
                if (currState.equals("lose")) {
                    lose = true;
                }
            }
            lose = true;
        }
    }

    private void setName() {
        // sets the player name
        System.out.print("What would you like to be called?   ");
        this.name = this.sc.nextLine();
    }

    private void setShip() {
        // sets the ship name
        System.out.println("Which ship would you prefer to sail on? The (a) 'Goldilocks,' (b) 'Treasure Trove,' " +
                "or (c) 'Silverman's Chest'?      ");
        this.ship = this.getChoice("Goldilocks", "Treasure Trove", "Silverman's Chest");

    }
    public String getChoice(String optionA, String optionB, String optionC) {
        // Most important method to the game
        // Gets the user's input and returns an output which will decide future events
        String option = this.sc.nextLine();
        String returnedValue = null;
        boolean chosen = false;
        while (!chosen) {
            switch (option) {
                case "a":
                    returnedValue = optionA;
                    chosen = true;
                    break;
                case "b":
                    returnedValue = optionB;
                    chosen = true;
                    break;
                case "c":
                    returnedValue = optionC;
                    chosen = true;
                    break;
                default:
                    System.out.println("Please select a valid letter (a / b / c)"); // if user types an incorrect input
                    option = this.sc.nextLine();
                    break;
            }
        }
        return returnedValue; // returns user's choice
    }
    private void setCrew() {
        // Array of members, nothing more
        this.crew = new String[]{"Sir John Winters", "Vera Brave", "Big Jones", "Stinkin' Pete", "Old-tied Sammy",
                "Mad Michael", "Paddy Sparrow", "Celia 'Butcher' Tyde"};
    }

    public void manageCrew() {
        // Creates first mate
        // Introduces crew and begins the voyage
        System.out.print("You find three reckless and powerful pirates on the Portugese harbor. Who do you want as " +
                "your first mate?  (a) " + this.crew[0] + ", (b) " + this.crew[1] + ", or (c) " + this.crew[3] + "   ");
        this.firstMate = this.getChoice(this.crew[0], this.crew[1], this.crew[3]);
        if (this.firstMate.equals(this.crew[0]) || this.firstMate.equals(this.crew[3])) {
            System.out.println(this.firstMate + " is a reliable pirate. He has looted hundreds of ships and is a very" +
                    " rich pirate.");
        } else {
            System.out.println("Watch out! " + this.firstMate + " is very deceitful. Make sure she does not replace " +
                    "you as captain and KILL YOU...");
        }
        Stage.line();
        System.out.print("This will be a very long voyage. You are leaving tomorrow for the Straits of Magellan with " +
                "the crew. The members of your ship are ");
        for (String member: this.crew) {
            System.out.print(member + ", ");
        }
    }
}

/* Intro:
 * Introduce goal of the game -  to find the hidden treasure left by SmokeAghast on Squaw Island
 * Get a crew: Sir John Winters, Vera Brave, Big Jones, Stinkin' Pete, Old-tied Sammy, Mad Michael, Paddy Sparrow, Celia 'Butcher' Tyde
 * Get on the ship and head for the antarctic ocean
 * there is a sea serpent, do you walk onto land or kill the beast, or coward away back home
 * If you go onto land, you are freezing cold, if you fight, half of the crew is killed and the boat is destroyed, if go home, you are caught by the English and are sentenced to death*/